<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PixelBid - NFT Art Marketplace</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #7B61FF;
            --primary-dark: #5D40E0;
            --secondary: #FF6B8B;
            --accent: #00D2D3;
            --dark: #1A1C2C;
            --light: #F8F9FC;
            --gray: #8C8CA1;
            --success: #4CAF50;
            --warning: #FFC107;
            --danger: #FF5252;
            --card-bg: rgba(255, 255, 255, 0.95);
            --card-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Roboto', 'Helvetica Neue', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1A1C2C 0%, #2D325A 100%);
            color: var(--light);
            line-height: 1.6;
            min-height: 100vh;
            padding-bottom: 80px;
            background-attachment: fixed;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        .screen {
            display: none;
            animation: fadeIn 0.4s ease-out;
            padding-bottom: 30px;
        }
        
        .screen.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes float {
            0% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0); }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            margin-bottom: 20px;
            position: sticky;
            top: 0;
            background: rgba(26, 28, 44, 0.9);
            backdrop-filter: blur(10px);
            z-index: 100;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .logo {
            display: flex;
            align-items: center;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--light);
            gap: 10px;
        }
        
        .logo-icon {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            width: 40px;
            height: 40px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: pulse 2s infinite;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .user-balance {
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 15px;
            border-radius: 50px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .ton-icon {
            color: #0088CC;
        }
        
        .nav-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            overflow-x: auto;
            padding-bottom: 5px;
        }
        
        .nav-tab {
            padding: 12px 24px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: var(--transition);
        }
        
        .nav-tab:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }
        
        .nav-tab.active {
            background: var(--primary);
            box-shadow: 0 5px 15px rgba(123, 97, 255, 0.4);
        }
        
        .card {
            background: var(--card-bg);
            border-radius: 20px;
            box-shadow: var(--card-shadow);
            padding: 25px;
            margin-bottom: 25px;
            color: var(--dark);
            transition: var(--transition);
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
        }
        
        .card-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .btn {
            padding: 14px 28px;
            border-radius: 50px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 1rem;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            box-shadow: 0 5px 15px rgba(123, 97, 255, 0.4);
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(123, 97, 255, 0.6);
        }
        
        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }
        
        .btn-outline:hover {
            background: rgba(123, 97, 255, 0.1);
        }
        
        .btn-sm {
            padding: 8px 16px;
            font-size: 0.9rem;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .art-card {
            background: var(--card-bg);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            cursor: pointer;
            transition: var(--transition);
        }
        
        .art-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }
        
        .art-preview {
            width: 100%;
            height: 180px;
            background-size: cover;
            background-position: center;
            position: relative;
            overflow: hidden;
        }
        
        .art-preview::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(transparent 60%, rgba(0, 0, 0, 0.7));
        }
        
        .art-info {
            padding: 15px;
        }
        
        .art-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--dark);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .art-price {
            color: var(--primary);
            font-weight: 700;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .art-status {
            font-size: 0.85rem;
            color: var(--gray);
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
        }
        
        input, select, textarea {
            width: 100%;
            padding: 14px;
            border: 1px solid #e0e6ed;
            border-radius: 12px;
            font-size: 1rem;
            background: white;
            transition: border 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(123, 97, 255, 0.2);
        }
        
        textarea {
            min-height: 120px;
            resize: vertical;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(26, 28, 44, 0.9);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
            backdrop-filter: blur(10px);
            animation: fadeIn 0.3s ease;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: var(--card-bg);
            border-radius: 25px;
            padding: 30px;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            animation: scaleIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        @keyframes scaleIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .modal-title {
            font-size: 1.7rem;
            font-weight: 700;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .modal-close {
            font-size: 1.8rem;
            cursor: pointer;
            color: var(--gray);
            transition: color 0.3s;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .modal-close:hover {
            background: #f0f0f0;
            color: var(--dark);
        }
        
        .admin-badge {
            background: var(--danger);
            color: white;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-left: 8px;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }
        
        .moderator-badge {
            background: var(--primary);
            color: white;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-left: 8px;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }
        
        .user-badge {
            background: var(--accent);
            color: white;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }
        
        .wallet-section {
            background: rgba(123, 97, 255, 0.1);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(123, 97, 255, 0.2);
        }
        
        .wallet-address {
            font-family: monospace;
            word-break: break-all;
            font-size: 0.9rem;
            background: rgba(0, 0, 0, 0.05);
            padding: 12px;
            border-radius: 12px;
            margin: 10px 0;
        }
        
        .editor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .editor-tools {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }
        
        .editor-canvas-container {
            overflow: auto;
            margin: 0 auto;
            max-width: 100%;
            background: rgba(0, 0, 0, 0.05);
            border-radius: 16px;
            padding: 15px;
        }
        
        #pixel-canvas {
            display: grid;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .pixel {
            width: 20px;
            height: 20px;
            border: 1px solid rgba(0, 0, 0, 0.05);
            cursor: pointer;
            transition: all 0.1s;
        }
        
        .pixel:hover {
            transform: scale(1.2);
            z-index: 2;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
        }
        
        .color-palette {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 12px;
            margin: 25px 0;
        }
        
        .color-option {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
            transition: var(--transition);
        }
        
        .color-option.selected {
            transform: scale(1.2);
            box-shadow: 0 0 0 3px white, 0 0 0 5px var(--primary);
        }
        
        .tool-btn {
            padding: 12px 20px;
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .tool-btn.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 5px 15px rgba(123, 97, 255, 0.4);
        }
        
        .tool-btn:hover:not(.active) {
            background: rgba(123, 97, 255, 0.1);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .stat-card {
            background: rgba(123, 97, 255, 0.1);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(123, 97, 255, 0.2);
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            margin: 10px 0;
            color: var(--primary);
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        @media (max-width: 768px) {
            .grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .nav-tabs {
                flex-wrap: wrap;
            }
            
            .user-info {
                flex-direction: column;
                align-items: flex-end;
                gap: 8px;
            }
            
            .logo {
                font-size: 1.5rem;
            }
        }
        
        .featured-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .floating-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 10px 25px rgba(123, 97, 255, 0.5);
            cursor: pointer;
            z-index: 99;
            transition: var(--transition);
            animation: float 3s ease-in-out infinite;
        }
        
        .floating-btn:hover {
            transform: scale(1.1) translateY(-5px);
            box-shadow: 0 15px 30px rgba(123, 97, 255, 0.6);
        }
        
        .art-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            z-index: 2;
        }
        
        .gradient-text {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--gray);
        }
        
        .empty-state i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: var(--primary);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Главный экран -->
        <div id="main-screen" class="screen active">
            <header>
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-palette"></i>
                    </div>
                    <span>PixelBid</span>
                </div>
                <div class="user-info">
                    <div class="user-balance">
                        <i class="fab fa-telegram-plane ton-icon"></i>
                        <span id="user-balance">5.25 TON</span>
                    </div>
                    <div class="user-avatar">
                        <span id="user-avatar-letter">U</span>
                    </div>
                </div>
            </header>
            
            <div class="nav-tabs">
                <div class="nav-tab active" data-screen="editor">
                    <i class="fas fa-plus"></i> Создать
                </div>
                <div class="nav-tab" data-screen="my-arts">
                    <i class="fas fa-paint-brush"></i> Мои арты
                </div>
                <div class="nav-tab" data-screen="auctions">
                    <i class="fas fa-gavel"></i> Аукционы
                </div>
                <div class="nav-tab" data-screen="market">
                    <i class="fas fa-store"></i> Магазин
                </div>
                <div class="nav-tab" data-screen="profile">
                    <i class="fas fa-user"></i> Профиль
                </div>
                <div class="nav-tab" data-screen="moderation" id="moderation-tab" style="display: none;">
                    <i class="fas fa-shield-alt"></i> Модерация
                </div>
            </div>
            
            <div class="card">
                <div class="card-title">
                    <i class="fas fa-rocket gradient-text"></i>
                    <span class="gradient-text">Добро пожаловать, <span id="user-name">Гость</span>!</span>
                </div>
                <p>Создавайте, продавайте и коллекционируйте уникальные пиксельные арты в блокчейн TON</p>
                <button class="btn btn-primary" data-screen="editor" style="margin-top: 20px;">
                    <i class="fas fa-plus"></i> Начать создание
                </button>
            </div>
            
            <div class="featured-header">
                <div class="section-title">
                    <i class="fas fa-fire gradient-text"></i>
                    <span class="gradient-text">Популярные лоты</span>
                </div>
                <button class="btn btn-outline" data-screen="market">
                    <i class="fas fa-arrow-right"></i> Все лоты
                </button>
            </div>
            
            <div class="grid" id="featured-auctions">
                <!-- Популярные аукционы будут загружены динамически -->
            </div>
        </div>
        
        <!-- Экран редактора -->
        <div id="editor-screen" class="screen">
            <header>
                <button class="btn btn-outline back-btn">
                    <i class="fas fa-arrow-left"></i> Назад
                </button>
                <div class="logo">Редактор</div>
                <button class="btn btn-primary" id="save-art-btn">
                    <i class="fas fa-save"></i> Сохранить
                </button>
            </header>
            
            <div class="card">
                <div class="editor-tools">
                    <button class="tool-btn active" data-tool="pencil">
                        <i class="fas fa-pencil-alt"></i> Карандаш
                    </button>
                    <button class="tool-btn" data-tool="eraser">
                        <i class="fas fa-eraser"></i> Ластик
                    </button>
                    <button class="tool-btn" data-tool="fill">
                        <i class="fas fa-fill-drip"></i> Заливка
                    </button>
                </div>
                
                <div class="color-palette" id="color-palette">
                    <!-- Цвета будут добавлены динамически -->
                </div>
                
                <div class="editor-canvas-container">
                    <div id="pixel-canvas"></div>
                </div>
            </div>
        </div>
        
        <!-- Экран моих артов -->
        <div id="my-arts-screen" class="screen">
            <header>
                <button class="btn btn-outline back-btn">
                    <i class="fas fa-arrow-left"></i> Назад
                </button>
                <div class="logo">Мои арты</div>
            </header>
            
            <div class="card">
                <div id="arts-filter" class="nav-tabs">
                    <div class="nav-tab active" data-status="all">
                        <i class="fas fa-layer-group"></i> Все
                    </div>
                    <div class="nav-tab" data-status="approved">
                        <i class="fas fa-check-circle"></i> Одобренные
                    </div>
                    <div class="nav-tab" data-status="pending">
                        <i class="fas fa-clock"></i> На модерации
                    </div>
                    <div class="nav-tab" data-status="rejected">
                        <i class="fas fa-times-circle"></i> Отклоненные
                    </div>
                </div>
                
                <div class="grid" id="user-arts-list">
                    <!-- Арты пользователя будут загружены динамически -->
                </div>
            </div>
        </div>
        
        <!-- Экран аукционов -->
        <div id="auctions-screen" class="screen">
            <header>
                <button class="btn btn-outline back-btn">
                    <i class="fas fa-arrow-left"></i> Назад
                </button>
                <div class="logo">Мои аукционы</div>
                <button class="btn btn-primary" id="create-auction-btn">
                    <i class="fas fa-plus"></i> Новый аукцион
                </button>
            </header>
            
            <div class="card">
                <div id="my-auctions-list">
                    <!-- Список аукционов пользователя -->
                </div>
            </div>
        </div>
        
        <!-- Экран магазина -->
        <div id="market-screen" class="screen">
            <header>
                <button class="btn btn-outline back-btn">
                    <i class="fas fa-arrow-left"></i> Назад
                </button>
                <div class="logo">Магазин</div>
            </header>
            
            <div class="card">
                <div class="section-title">
                    <i class="fas fa-store gradient-text"></i>
                    <span class="gradient-text">Все аукционы</span>
                </div>
                <div class="grid" id="all-auctions">
                    <!-- Все аукционы будут загружены динамически -->
                </div>
            </div>
        </div>
        
        <!-- Экран профиля -->
        <div id="profile-screen" class="screen">
            <header>
                <button class="btn btn-outline back-btn">
                    <i class="fas fa-arrow-left"></i> Назад
                </button>
                <div class="logo">Профиль</div>
            </header>
            
            <div class="card">
                <div class="form-group">
                    <label><i class="fas fa-user"></i> Имя пользователя</label>
                    <input type="text" id="username" readonly>
                </div>
                
                <div class="form-group">
                    <label><i class="fab fa-telegram"></i> ID Telegram</label>
                    <input type="text" id="user-id" readonly>
                </div>
                
                <div class="form-group">
                    <label><i class="fas fa-user-tag"></i> Роль</label>
                    <input type="text" id="user-role" readonly>
                </div>
                
                <div class="wallet-section">
                    <label><i class="fas fa-wallet"></i> TON Кошелек</label>
                    <div class="wallet-address" id="wallet-address">Не подключен</div>
                    <button class="btn btn-primary" id="connect-wallet-btn">
                        <i class="fas fa-plug"></i> Подключить кошелек
                    </button>
                </div>
                
                <div class="section-title" style="margin-top: 30px;">
                    <i class="fas fa-chart-line gradient-text"></i>
                    <span class="gradient-text">Статистика</span>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <i class="fas fa-paint-brush" style="font-size: 2rem; color: var(--primary);"></i>
                        <div class="stat-value" id="art-count">0</div>
                        <div class="stat-label">Создано артов</div>
                    </div>
                    
                    <div class="stat-card">
                        <i class="fas fa-coins" style="font-size: 2rem; color: var(--primary);"></i>
                        <div class="stat-value" id="sold-count">0</div>
                        <div class="stat-label">Продано артов</div>
                    </div>
                    
                    <div class="stat-card">
                        <i class="fas fa-gavel" style="font-size: 2rem; color: var(--primary);"></i>
                        <div class="stat-value" id="auctions-count">0</div>
                        <div class="stat-label">Текущих аукционов</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Экран модерации -->
        <div id="moderation-screen" class="screen">
            <header>
                <button class="btn btn-outline back-btn">
                    <i class="fas fa-arrow-left"></i> Назад
                </button>
                <div class="logo">Модерация</div>
            </header>
            
            <div class="card">
                <div class="nav-tabs">
                    <div class="nav-tab active" data-tab="arts">
                        <i class="fas fa-images"></i> Арты
                    </div>
                    <div class="nav-tab" data-tab="moderators">
                        <i class="fas fa-user-shield"></i> Модераторы
                    </div>
                </div>
                
                <div id="moderation-content">
                    <!-- Контент будет загружен динамически -->
                </div>
            </div>
        </div>
        
        <!-- Модальное окно создания аукциона -->
        <div class="modal" id="create-auction-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">
                        <i class="fas fa-gavel"></i>
                        Создать аукцион
                    </div>
                    <div class="modal-close" id="close-auction-modal">×</div>
                </div>
                
                <div class="form-group">
                    <label>Выберите арт</label>
                    <select id="art-select">
                        <!-- Арты будут добавлены динамически -->
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Название аукциона</label>
                    <input type="text" id="auction-title" placeholder="Название вашего NFT">
                </div>
                
                <div class="form-group">
                    <label>Описание</label>
                    <textarea id="auction-description" placeholder="Опишите ваш арт"></textarea>
                </div>
                
                <div class="form-group">
                    <label>Стартовая цена (TON)</label>
                    <input type="number" id="auction-start-price" min="0.1" step="0.1" value="0.5">
                </div>
                
                <div class="form-group">
                    <label>Длительность аукциона</label>
                    <select id="auction-duration">
                        <option value="1">1 день</option>
                        <option value="3">3 дня</option>
                        <option value="7" selected>7 дней</option>
                    </select>
                </div>
                
                <button class="btn btn-primary" id="create-auction-submit">
                    <i class="fas fa-plus"></i> Создать аукцион
                </button>
            </div>
        </div>
        
        <!-- Модальное окно аукциона -->
        <div class="modal" id="auction-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title" id="auction-modal-title">
                        <i class="fas fa-gavel"></i>
                        Аукцион
                    </div>
                    <div class="modal-close" id="close-auction-detail">×</div>
                </div>
                
                <div id="auction-modal-content">
                    <!-- Содержимое аукциона будет загружено динамически -->
                </div>
            </div>
        </div>
    </div>

    <div class="floating-btn" data-screen="editor">
        <i class="fas fa-plus"></i>
    </div>

    <script>
        // Основной объект приложения
        const PixelBidApp = {
            // Конфигурация
            config: {
                gridSize: 16,
                pixelSize: 20,
                colors: [
                    '#000000', '#FF0000', '#00FF00', '#0000FF', 
                    '#FFFF00', '#FF00FF', '#00FFFF', '#FFFFFF',
                    '#FFA500', '#800080', '#008080', '#808000',
                    '#800000', '#008000', '#000080', '#808080'
                ],
                adminId: 370552943 // Замените на ваш реальный ID
            },
            
            // Состояние приложения
            state: {
                currentScreen: 'main',
                user: null,
                balance: 0,
                wallet: null,
                arts: [],
                auctions: [],
                selectedColor: '#000000',
                currentTool: 'pencil',
                isAdmin: false,
                isModerator: false,
                selectedArtForAuction: null,
                moderators: [],
                editorInitialized: false
            },
            
            // Инициализация приложения
            init() {
                // Инициализация Telegram WebApp
                Telegram.WebApp.ready();
                Telegram.WebApp.expand();
                
                // Загрузка данных из localStorage
                this.loadLocalData();
                
                // Получение данных пользователя из Telegram
                this.initUser();
                
                // Настройка навигации
                this.setupNavigation();
                
                // Загрузка данных
                this.loadUserData();
                
                // Инициализация редактора
                this.initEditor();
                
                // Инициализация аукционов
                this.initAuctions();
            },
            
            // Загрузка данных из localStorage
            loadLocalData() {
                const savedArts = localStorage.getItem('arts');
                if (savedArts) this.state.arts = JSON.parse(savedArts);
                
                const savedAuctions = localStorage.getItem('auctions');
                if (savedAuctions) this.state.auctions = JSON.parse(savedAuctions);
                
                const savedModerators = localStorage.getItem('moderators');
                if (savedModerators) {
                    this.state.moderators = JSON.parse(savedModerators);
                } else {
                    // По умолчанию администратор
                    this.state.moderators = [this.config.adminId];
                    localStorage.setItem('moderators', JSON.stringify(this.state.moderators));
                }
            },
            
            // Инициализация пользователя
            initUser() {
                const initData = Telegram.WebApp.initDataUnsafe;
                this.state.user = {
                    id: initData.user?.id || Math.floor(Math.random() * 1000000),
                    firstName: initData.user?.first_name || 'Гость',
                    username: initData.user?.username || 'guest'
                };
                
                // Проверка прав
                this.state.isAdmin = this.state.user.id === this.config.adminId;
                this.state.isModerator = this.state.moderators.includes(this.state.user.id) || this.state.isAdmin;
                
                // Обновление UI
                document.getElementById('user-name').textContent = this.state.user.firstName;
                document.getElementById('username').value = this.state.user.firstName;
                document.getElementById('user-id').value = this.state.user.id;
                document.getElementById('user-avatar-letter').textContent = this.state.user.firstName.charAt(0);
                
                // Отображение роли
                let roleBadge = '';
                if (this.state.isAdmin) {
                    roleBadge = '<span class="admin-badge">ADMIN</span>';
                } else if (this.state.isModerator) {
                    roleBadge = '<span class="moderator-badge">MOD</span>';
                }
                
                // Показать вкладку модерации для модераторов
                if (this.state.isModerator) {
                    document.getElementById('moderation-tab').style.display = 'flex';
                }
            },
            
            // Настройка навигации
            setupNavigation() {
                // Обработка кликов по табам
                document.querySelectorAll('.nav-tab').forEach(tab => {
                    tab.addEventListener('click', () => {
                        document.querySelectorAll('.nav-tab').forEach(t => {
                            t.classList.remove('active');
                        });
                        tab.classList.add('active');
                        this.showScreen(tab.dataset.screen);
                    });
                });
                
                // Кнопки "Назад"
                document.querySelectorAll('.back-btn').forEach(btn => {
                    btn.addEventListener('click', () => this.showScreen('main'));
                });
                
                // Кнопки перехода
                document.querySelectorAll('[data-screen]').forEach(btn => {
                    if (btn.classList.contains('nav-tab')) return;
                    btn.addEventListener('click', () => {
                        this.showScreen(btn.dataset.screen);
                    });
                });
                
                // Кнопка создания аукциона
                document.getElementById('create-auction-btn').addEventListener('click', () => {
                    this.showCreateAuctionModal();
                });
                
                // Кнопка сохранения арта
                document.getElementById('save-art-btn').addEventListener('click', () => {
                    this.saveArt();
                });
                
                // Подключение кошелька
                document.getElementById('connect-wallet-btn').addEventListener('click', () => {
                    this.connectWallet();
                });
                
                // Закрытие модальных окон
                document.getElementById('close-auction-modal').addEventListener('click', () => {
                    document.getElementById('create-auction-modal').classList.remove('active');
                });
                
                document.getElementById('close-auction-detail').addEventListener('click', () => {
                    document.getElementById('auction-modal').classList.remove('active');
                });
                
                // Создание аукциона
                document.getElementById('create-auction-submit').addEventListener('click', () => {
                    this.createAuction();
                });
                
                // Парящая кнопка
                document.querySelector('.floating-btn').addEventListener('click', function() {
                    PixelBidApp.showScreen('editor');
                });
            },
            
            // Показать экран
            showScreen(screenId) {
                // Скрыть все экраны
                document.querySelectorAll('.screen').forEach(screen => {
                    screen.classList.remove('active');
                });
                
                // Показать запрошенный экран
                const screen = document.getElementById(`${screenId}-screen`);
                if (screen) {
                    screen.classList.add('active');
                    this.state.currentScreen = screenId;
                    
                    // Загрузка данных при открытии
                    if (screenId === 'editor' && !this.state.editorInitialized) {
                        this.initEditorCanvas();
                    }
                    else if (screenId === 'my-arts') {
                        this.loadUserArts();
                    }
                    else if (screenId === 'auctions') {
                        this.loadUserAuctions();
                    }
                    else if (screenId === 'market') {
                        this.loadAllAuctions();
                    }
                    else if (screenId === 'profile') {
                        this.updateProfile();
                    }
                    else if (screenId === 'moderation') {
                        this.renderModerationContent('arts');
                    }
                }
            },
            
            // Загрузить данные пользователя
            loadUserData() {
                // Заглушка - в реальном приложении запрос к API
                setTimeout(() => {
                    this.state.balance = 5.25;
                    document.getElementById('user-balance').textContent = `${this.state.balance} TON`;
                    
                    // Загрузка тестовых данных
                    this.loadSampleArts();
                    this.loadSampleAuctions();
                    this.updateFeaturedAuctions();
                }, 500);
            },
            
            // Инициализация редактора
            initEditor() {
                this.initColorPalette();
            },
            
            // Инициализация палитры цветов
            initColorPalette() {
                const palette = document.getElementById('color-palette');
                palette.innerHTML = '';
                
                this.config.colors.forEach(color => {
                    const colorElement = document.createElement('div');
                    colorElement.className = 'color-option';
                    if (color === this.state.selectedColor) {
                        colorElement.classList.add('selected');
                    }
                    colorElement.style.backgroundColor = color;
                    colorElement.dataset.color = color;
                    colorElement.addEventListener('click', () => {
                        this.selectColor(color);
                    });
                    palette.appendChild(colorElement);
                });
                
                // Выбор инструментов
                document.querySelectorAll('.tool-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        document.querySelectorAll('.tool-btn').forEach(b => {
                            b.classList.remove('active');
                        });
                        btn.classList.add('active');
                        this.state.currentTool = btn.dataset.tool;
                    });
                });
            },
            
            // Выбор цвета
            selectColor(color) {
                this.state.selectedColor = color;
                
                // Обновление UI
                document.querySelectorAll('.color-option').forEach(option => {
                    option.classList.toggle('selected', option.dataset.color === color);
                });
            },
            
            // Инициализация холста редактора
            initEditorCanvas() {
                const canvas = document.getElementById('pixel-canvas');
                canvas.innerHTML = '';
                canvas.style.gridTemplateColumns = `repeat(${this.config.gridSize}, ${this.config.pixelSize}px)`;
                
                // Создание пикселей
                for (let i = 0; i < this.config.gridSize * this.config.gridSize; i++) {
                    const pixel = document.createElement('div');
                    pixel.className = 'pixel';
                    pixel.dataset.index = i;
                    
                    pixel.addEventListener('click', () => {
                        if (this.state.currentTool === 'pencil') {
                            pixel.style.backgroundColor = this.state.selectedColor;
                        } else if (this.state.currentTool === 'eraser') {
                            pixel.style.backgroundColor = '';
                        }
                    });
                    
                    canvas.appendChild(pixel);
                }
                
                this.state.editorInitialized = true;
            },
            
            // Сохранение арта
            saveArt() {
                const artData = {
                    id: Date.now(),
                    title: `Мой арт #${Math.floor(Math.random() * 100)}`,
                    pixels: [],
                    created: new Date().toISOString(),
                    authorId: this.state.user.id,
                    authorName: this.state.user.firstName,
                    status: 'pending' // На модерации
                };
                
                // Сбор данных пикселей
                document.querySelectorAll('.pixel').forEach(pixel => {
                    artData.pixels.push(pixel.style.backgroundColor || '');
                });
                
                // Добавление в коллекцию
                this.state.arts.push(artData);
                localStorage.setItem('arts', JSON.stringify(this.state.arts));
                
                // Уведомление
                Telegram.WebApp.showAlert('Арт успешно сохранен и отправлен на модерацию!');
                
                // Возврат на главный экран
                this.showScreen('main');
            },
            
            // Инициализация аукционов
            initAuctions() {
                // Обработка кликов по карточкам аукционов
                document.addEventListener('click', (e) => {
                    const artCard = e.target.closest('.art-card');
                    if (artCard) {
                        const auctionId = parseInt(artCard.dataset.id);
                        this.showAuctionDetails(auctionId);
                    }
                });
            },
            
            // Показать модальное окно создания аукциона
            showCreateAuctionModal() {
                const artSelect = document.getElementById('art-select');
                artSelect.innerHTML = '';
                
                // Фильтрация утвержденных артов пользователя
                const userArts = this.state.arts.filter(art => 
                    art.authorId === this.state.user.id && 
                    art.status === 'approved'
                );
                
                if (userArts.length === 0) {
                    artSelect.innerHTML = '<option value="">У вас нет одобренных артов</option>';
                } else {
                    userArts.forEach(art => {
                        const option = document.createElement('option');
                        option.value = art.id;
                        option.textContent = art.title;
                        artSelect.appendChild(option);
                    });
                }
                
                document.getElementById('create-auction-modal').classList.add('active');
            },
            
            // Создать новый аукцион
            createAuction() {
                const artId = parseInt(document.getElementById('art-select').value);
                const title = document.getElementById('auction-title').value;
                const description = document.getElementById('auction-description').value;
                const startPrice = parseFloat(document.getElementById('auction-start-price').value);
                const duration = parseInt(document.getElementById('auction-duration').value);
                
                if (!artId || !title || !startPrice) {
                    Telegram.WebApp.showAlert('Заполните все обязательные поля');
                    return;
                }
                
                const art = this.state.arts.find(a => a.id === artId);
                if (!art) return;
                
                const auction = {
                    id: Date.now(),
                    artId: art.id,
                    title: title,
                    description: description,
                    startPrice: startPrice,
                    currentPrice: startPrice,
                    duration: duration,
                    startDate: new Date().toISOString(),
                    endDate: new Date(Date.now() + duration * 24 * 60 * 60 * 1000).toISOString(),
                    authorId: this.state.user.id,
                    bids: [],
                    status: 'active'
                };
                
                this.state.auctions.push(auction);
                localStorage.setItem('auctions', JSON.stringify(this.state.auctions));
                document.getElementById('create-auction-modal').classList.remove('active');
                Telegram.WebApp.showAlert('Аукцион успешно создан!');
                this.loadUserAuctions();
            },
            
            // Загрузка пользовательских аукционов
            loadUserAuctions() {
                const container = document.getElementById('my-auctions-list');
                container.innerHTML = '';
                
                const userAuctions = this.state.auctions.filter(
                    auction => auction.authorId === this.state.user.id
                );
                
                if (userAuctions.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-gavel"></i>
                            <h3>У вас пока нет аукционов</h3>
                            <p>Создайте свой первый аукцион, чтобы начать продавать арты</p>
                            <button class="btn btn-primary" id="create-auction-btn-modal" style="margin-top: 15px;">
                                <i class="fas fa-plus"></i> Создать аукцион
                            </button>
                        </div>
                    `;
                    
                    document.getElementById('create-auction-btn-modal').addEventListener('click', () => {
                        this.showCreateAuctionModal();
                    });
                    return;
                }
                
                userAuctions.forEach(auction => {
                    const art = this.state.arts.find(a => a.id === auction.artId);
                    if (!art) return;
                    
                    const auctionEl = document.createElement('div');
                    auctionEl.className = 'card';
                    auctionEl.innerHTML = `
                        <h3>${auction.title}</h3>
                        <p>Текущая цена: <strong>${auction.currentPrice} TON</strong></p>
                        <p>Ставок: ${auction.bids.length}</p>
                        <p>Окончание: ${new Date(auction.endDate).toLocaleDateString()}</p>
                        <button class="btn btn-sm btn-primary" data-id="${auction.id}">
                            <i class="fas fa-eye"></i> Просмотреть
                        </button>
                    `;
                    container.appendChild(auctionEl);
                    
                    // Добавляем обработчик кнопки
                    auctionEl.querySelector('button').addEventListener('click', () => {
                        this.showAuctionDetails(auction.id);
                    });
                });
            },
            
            // Загрузка всех аукционов
            loadAllAuctions() {
                const container = document.getElementById('all-auctions');
                container.innerHTML = '';
                
                if (this.state.auctions.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-store"></i>
                            <h3>Пока нет активных аукционов</h3>
                            <p>Будьте первым, кто создаст аукцион!</p>
                        </div>
                    `;
                    return;
                }
                
                this.state.auctions.forEach(auction => {
                    const art = this.state.arts.find(a => a.id === auction.artId);
                    if (!art) return;
                    
                    const auctionEl = document.createElement('div');
                    auctionEl.className = 'art-card';
                    auctionEl.dataset.id = auction.id;
                    
                    // Создаем миниатюру арта
                    let previewStyle = '';
                    if (art.pixels.length > 0 && art.pixels[0]) {
                        previewStyle = `background-color: ${art.pixels[0]};`;
                    }
                    
                    auctionEl.innerHTML = `
                        <div class="art-preview" style="${previewStyle}"></div>
                        <div class="art-info">
                            <div class="art-title">${auction.title}</div>
                            <div class="art-price">${auction.currentPrice} TON</div>
                            <div class="art-status">Осталось: ${this.getTimeLeft(auction.endDate)}</div>
                        </div>
                    `;
                    container.appendChild(auctionEl);
                });
            },
            
            // Показать детали аукциона
            showAuctionDetails(auctionId) {
                const auction = this.state.auctions.find(a => a.id === auctionId);
                if (!auction) return;
                
                const art = this.state.arts.find(a => a.id === auction.artId);
                if (!art) return;
                
                const container = document.getElementById('auction-modal-content');
                
                // Создаем миниатюру арта
                let previewStyle = '';
                if (art.pixels.length > 0 && art.pixels[0]) {
                    previewStyle = `background-color: ${art.pixels[0]};`;
                }
                
                container.innerHTML = `
                    <div class="card">
                        <h3>${auction.title}</h3>
                        <div class="art-preview" style="height: 200px; ${previewStyle}"></div>
                        <p>${auction.description}</p>
                        <p>Автор: ${art.authorName}</p>
                    </div>
                    
                    <div class="card">
                        <h4>Информация об аукционе</h4>
                        <p>Текущая цена: <strong>${auction.currentPrice} TON</strong></p>
                        <p>Стартовая цена: ${auction.startPrice} TON</p>
                        <p>Ставок: ${auction.bids.length}</p>
                        <p>Начало: ${new Date(auction.startDate).toLocaleDateString()}</p>
                        <p>Окончание: ${new Date(auction.endDate).toLocaleDateString()} (${this.getTimeLeft(auction.endDate)})</p>
                    </div>
                    
                    <div class="card">
                        <h4>Сделать ставку</h4>
                        <div class="form-group">
                            <label>Ваша ставка (TON)</label>
                            <input type="number" id="bid-amount" min="${auction.currentPrice + 0.1}" step="0.1" value="${auction.currentPrice + 0.1}">
                        </div>
                        <button class="btn btn-primary" id="place-bid-btn">
                            <i class="fas fa-gavel"></i> Сделать ставку
                        </button>
                    </div>
                `;
                
                document.getElementById('auction-modal').classList.add('active');
                
                // Обработка ставки
                document.getElementById('place-bid-btn').addEventListener('click', () => {
                    this.placeBid(auctionId);
                });
            },
            
            // Сделать ставку
            placeBid(auctionId) {
                const amount = parseFloat(document.getElementById('bid-amount').value);
                const auction = this.state.auctions.find(a => a.id === auctionId);
                
                if (!auction) return;
                if (amount <= auction.currentPrice) {
                    Telegram.WebApp.showAlert('Ставка должна быть выше текущей!');
                    return;
                }
                
                auction.bids.push({
                    userId: this.state.user.id,
                    amount: amount,
                    date: new Date().toISOString()
                });
                
                auction.currentPrice = amount;
                localStorage.setItem('auctions', JSON.stringify(this.state.auctions));
                Telegram.WebApp.showAlert(`Ставка в ${amount} TON успешно сделана!`);
                document.getElementById('auction-modal').classList.remove('active');
            },
            
            // Подключение кошелька
            connectWallet() {
                // В реальном приложении здесь будет интеграция с TON Connect
                const walletAddress = `EQ${Math.random().toString().slice(2, 30)}`;
                
                this.state.wallet = {
                    address: walletAddress,
                    connected: true
                };
                
                localStorage.setItem('ton_wallet', JSON.stringify(this.state.wallet));
                document.getElementById('wallet-address').textContent = walletAddress;
                Telegram.WebApp.showAlert('TON кошелек успешно подключен!');
            },
            
            // Загрузка артов пользователя
            loadUserArts() {
                const container = document.getElementById('user-arts-list');
                container.innerHTML = '';
                
                const statusFilter = document.querySelector('#arts-filter .nav-tab.active').dataset.status;
                
                const userArts = this.state.arts.filter(art => 
                    art.authorId === this.state.user.id &&
                    (statusFilter === 'all' || art.status === statusFilter)
                );
                
                if (userArts.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-paint-brush"></i>
                            <h3>Артов не найдено</h3>
                            <p>Создайте свой первый арт в редакторе</p>
                            <button class="btn btn-primary" data-screen="editor" style="margin-top: 15px;">
                                <i class="fas fa-plus"></i> Создать арт
                            </button>
                        </div>
                    `;
                    
                    container.querySelector('button').addEventListener('click', () => {
                        this.showScreen('editor');
                    });
                    return;
                }
                
                userArts.forEach(art => {
                    const artEl = document.createElement('div');
                    artEl.className = 'art-card';
                    artEl.dataset.id = art.id;
                    
                    // Создаем миниатюру арта
                    let previewStyle = '';
                    if (art.pixels.length > 0 && art.pixels[0]) {
                        previewStyle = `background-color: ${art.pixels[0]};`;
                    }
                    
                    artEl.innerHTML = `
                        <div class="art-preview" style="${previewStyle}">
                            <div class="art-badge">${this.getArtStatusText(art.status)}</div>
                        </div>
                        <div class="art-info">
                            <div class="art-title">${art.title}</div>
                            ${art.status === 'approved' ? 
                                `<button class="btn btn-sm btn-primary auction-art-btn" data-id="${art.id}">
                                    <i class="fas fa-gavel"></i> Аукцион
                                </button>` : ''}
                            <button class="btn btn-sm btn-outline delete-art-btn" data-id="${art.id}">
                                <i class="fas fa-trash"></i> Удалить
                            </button>
                        </div>
                    `;
                    container.appendChild(artEl);
                });
                
                // Обработчики кнопок
                container.querySelectorAll('.auction-art-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        this.createAuctionForArt(parseInt(btn.dataset.id));
                    });
                });
                
                container.querySelectorAll('.delete-art-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        this.deleteArt(parseInt(btn.dataset.id));
                    });
                });
                
                // Фильтрация по статусу
                document.querySelectorAll('#arts-filter .nav-tab').forEach(tab => {
                    tab.addEventListener('click', () => {
                        document.querySelectorAll('#arts-filter .nav-tab').forEach(t => {
                            t.classList.remove('active');
                        });
                        tab.classList.add('active');
                        this.loadUserArts();
                    });
                });
            },
            
            // Вспомогательная функция для текста статуса
            getArtStatusText(status) {
                const statusMap = {
                    'pending': '⏳ На модерации',
                    'approved': '✅ Одобрено',
                    'rejected': '❌ Отклонено'
                };
                return statusMap[status] || status;
            },
            
            // Создание аукциона для арта
            createAuctionForArt(artId) {
                this.state.selectedArtForAuction = this.state.arts.find(a => a.id === artId);
                document.getElementById('auction-title').value = this.state.selectedArtForAuction.title;
                document.getElementById('create-auction-modal').classList.add('active');
            },
            
            // Удаление арта
            deleteArt(artId) {
                this.state.arts = this.state.arts.filter(a => a.id !== artId);
                localStorage.setItem('arts', JSON.stringify(this.state.arts));
                Telegram.WebApp.showAlert('Арт успешно удален!');
                this.loadUserArts();
            },
            
            // Рендер контента модерации
            renderModerationContent(tab) {
                const container = document.getElementById('moderation-content');
                container.innerHTML = '';
                
                if (tab === 'arts') {
                    container.innerHTML = `
                        <h3>Арты на модерации</h3>
                        <div id="pending-arts-list"></div>
                    `;
                    this.loadPendingArts();
                } 
                else if (tab === 'moderators') {
                    if (!this.state.isAdmin) {
                        container.innerHTML = '<p>Только администратор может управлять модераторами</p>';
                        return;
                    }
                    
                    container.innerHTML = `
                        <h3>Управление модераторами</h3>
                        <div class="form-group">
                            <label>Добавить модератора по ID Telegram</label>
                            <input type="number" id="new-moderator-id" placeholder="Введите ID пользователя">
                        </div>
                        <button class="btn btn-primary" id="add-moderator-btn">
                            <i class="fas fa-plus"></i> Добавить
                        </button>
                        
                        <h4>Текущие модераторы</h4>
                        <ul id="moderators-list" class="card"></ul>
                    `;
                    this.loadModeratorsList();
                }
                
                // Активируем правильную вкладку
                document.querySelectorAll('#moderation-screen .nav-tab').forEach(tabElement => {
                    tabElement.classList.toggle('active', tabElement.dataset.tab === tab);
                });
                
                // Обработчики для вкладок
                document.querySelectorAll('#moderation-screen .nav-tab').forEach(tabElement => {
                    tabElement.addEventListener('click', () => {
                        this.renderModerationContent(tabElement.dataset.tab);
                    });
                });
                
                // Обработчик для добавления модератора
                document.getElementById('add-moderator-btn')?.addEventListener('click', () => {
                    this.addModerator();
                });
            },
            
            // Загрузка артов на модерацию
            loadPendingArts() {
                const container = document.getElementById('pending-arts-list');
                container.innerHTML = '';
                
                const pendingArts = this.state.arts.filter(art => art.status === 'pending');
                
                if (pendingArts.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-check-circle"></i>
                            <h3>Нет артов на модерации</h3>
                            <p>Все арты проверены и одобрены</p>
                        </div>
                    `;
                    return;
                }
                
                pendingArts.forEach(art => {
                    const artEl = document.createElement('div');
                    artEl.className = 'card';
                    
                    // Создаем миниатюру арта
                    let previewStyle = '';
                    if (art.pixels.length > 0 && art.pixels[0]) {
                        previewStyle = `background-color: ${art.pixels[0]};`;
                    }
                    
                    artEl.innerHTML = `
                        <h4>${art.title}</h4>
                        <p>Автор: ${art.authorName}</p>
                        <div class="art-preview" style="height: 100px; ${previewStyle}"></div>
                        <div class="form-group">
                            <label>Решение</label>
                            <select class="art-status-select" data-id="${art.id}">
                                <option value="pending">На рассмотрении</option>
                                <option value="approved">Одобрить</option>
                                <option value="rejected">Отклонить</option>
                            </select>
                        </div>
                    `;
                    container.appendChild(artEl);
                    
                    // Установка текущего статуса
                    const select = artEl.querySelector('.art-status-select');
                    select.value = art.status;
                    
                    // Обработчик изменения статуса
                    select.addEventListener('change', () => {
                        this.updateArtStatus(art.id, select.value);
                    });
                });
            },
            
            // Обновление статуса арта
            updateArtStatus(artId, status) {
                const art = this.state.arts.find(a => a.id === artId);
                if (art) {
                    art.status = status;
                    localStorage.setItem('arts', JSON.stringify(this.state.arts));
                    
                    // Обновляем интерфейс
                    if (this.state.currentScreen === 'moderation') {
                        this.loadPendingArts();
                    }
                    
                    Telegram.WebApp.showAlert(`Статус арта "${art.title}" изменен на: ${status}`);
                }
            },
            
            // Загрузка списка модераторов
            loadModeratorsList() {
                const container = document.getElementById('moderators-list');
                container.innerHTML = '';
                
                this.state.moderators.forEach(id => {
                    const li = document.createElement('li');
                    li.innerHTML = `
                        <span>ID: ${id}</span>
                        ${id !== this.config.adminId ? 
                            `<button class="btn btn-sm btn-danger remove-moderator-btn" data-id="${id}">
                                <i class="fas fa-trash"></i> Удалить
                            </button>` : 
                            ''}
                    `;
                    li.style.padding = '10px';
                    li.style.display = 'flex';
                    li.style.justifyContent = 'space-between';
                    li.style.alignItems = 'center';
                    container.appendChild(li);
                });
                
                // Обработчики удаления модераторов
                container.querySelectorAll('.remove-moderator-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const id = parseInt(btn.dataset.id);
                        this.removeModerator(id);
                    });
                });
            },
            
            // Добавление модератора
            addModerator() {
                const newId = parseInt(document.getElementById('new-moderator-id').value);
                if (!newId) {
                    Telegram.WebApp.showAlert('Введите ID пользователя');
                    return;
                }
                
                if (this.state.moderators.includes(newId)) {
                    Telegram.WebApp.showAlert('Этот пользователь уже является модератором');
                    return;
                }
                
                this.state.moderators.push(newId);
                localStorage.setItem('moderators', JSON.stringify(this.state.moderators));
                Telegram.WebApp.showAlert('Модератор успешно добавлен');
                this.loadModeratorsList();
            },
            
            // Удаление модератора
            removeModerator(id) {
                this.state.moderators = this.state.moderators.filter(modId => modId !== id);
                localStorage.setItem('moderators', JSON.stringify(this.state.moderators));
                Telegram.WebApp.showAlert('Модератор успешно удален');
                this.loadModeratorsList();
            },
            
            // Обновить профиль
            updateProfile() {
                document.getElementById('art-count').textContent = 
                    this.state.arts.filter(a => a.authorId === this.state.user.id).length;
                
                document.getElementById('sold-count').textContent = 
                    this.state.auctions.filter(a => 
                        a.authorId === this.state.user.id && 
                        a.status === 'completed'
                    ).length;
                
                document.getElementById('auctions-count').textContent = 
                    this.state.auctions.filter(a => 
                        a.authorId === this.state.user.id && 
                        a.status === 'active'
                    ).length;
                    
                // Отображение роли
                let role = 'Пользователь';
                if (this.state.isModerator) role = 'Модератор';
                if (this.state.isAdmin) role = 'Администратор';
                document.getElementById('user-role').value = role;
                
                // Кошелек
                const savedWallet = localStorage.getItem('ton_wallet');
                if (savedWallet) {
                    const wallet = JSON.parse(savedWallet);
                    document.getElementById('wallet-address').textContent = wallet.address;
                }
            },
            
            // Загрузка тестовых данных
            loadSampleArts() {
                // Если уже есть арты, не загружать тестовые
                if (this.state.arts.length > 0) return;
                
                this.state.arts.push(
                    {
                        id: 1,
                        title: "Космический кот",
                        pixels: ["#000000", "#FF0000", "#0000FF"],
                        created: "2025-07-25T12:00:00Z",
                        authorId: this.state.user.id,
                        authorName: this.state.user.firstName,
                        status: "approved"
                    },
                    {
                        id: 2,
                        title: "Абстракция 42",
                        pixels: ["#00FF00", "#FFFF00", "#FF00FF"],
                        created: "2025-07-26T14:30:00Z",
                        authorId: 12345,
                        authorName: "Другой Художник",
                        status: "approved"
                    }
                );
                
                localStorage.setItem('arts', JSON.stringify(this.state.arts));
            },
            
            loadSampleAuctions() {
                if (this.state.auctions.length > 0) return;
                
                this.state.auctions.push(
                    {
                        id: 1,
                        artId: 1,
                        title: "Космический кот",
                        description: "Пиксельный арт кота в космосе",
                        startPrice: 0.5,
                        currentPrice: 1.2,
                        duration: 7,
                        startDate: "2025-07-25T12:00:00Z",
                        endDate: "2025-08-01T12:00:00Z",
                        authorId: this.state.user.id,
                        bids: [
                            { userId: 12345, amount: 0.7, date: "2025-07-25T14:30:00Z" },
                            { userId: 67890, amount: 1.2, date: "2025-07-26T09:15:00Z" }
                        ],
                        status: "active"
                    }
                );
                
                localStorage.setItem('auctions', JSON.stringify(this.state.auctions));
            },
            
            updateFeaturedAuctions() {
                const container = document.getElementById('featured-auctions');
                container.innerHTML = '';
                
                if (this.state.auctions.length === 0) return;
                
                this.state.auctions.slice(0, 4).forEach(auction => {
                    const art = this.state.arts.find(a => a.id === auction.artId);
                    if (!art) return;
                    
                    const auctionEl = document.createElement('div');
                    auctionEl.className = 'art-card';
                    auctionEl.dataset.id = auction.id;
                    
                    // Создаем миниатюру арта
                    let previewStyle = '';
                    if (art.pixels.length > 0 && art.pixels[0]) {
                        previewStyle = `background-color: ${art.pixels[0]};`;
                    }
                    
                    auctionEl.innerHTML = `
                        <div class="art-preview" style="${previewStyle}"></div>
                        <div class="art-info">
                            <div class="art-title">${auction.title}</div>
                            <div class="art-price">${auction.currentPrice} TON</div>
                            <div class="art-status">Осталось: ${this.getTimeLeft(auction.endDate)}</div>
                        </div>
                    `;
                    container.appendChild(auctionEl);
                });
            },
            
            // Вспомогательные функции
            getTimeLeft(endDate) {
                const end = new Date(endDate);
                const now = new Date();
                const diff = end - now;
                
                if (diff <= 0) return 'завершен';
                
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                
                return `${days}д ${hours}ч`;
            }
        };
        
        // Инициализация приложения при загрузке
        document.addEventListener('DOMContentLoaded', () => PixelBidApp.init());
    </script>
</body>
</html>